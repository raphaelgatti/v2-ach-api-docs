<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Dwolla API Docs</title>
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" /> 
    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["json","php","ruby","python","javascript"]);
        });
      </script>

      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-55964336-1', 'auto');
        ga('send', 'pageview');

      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">

      <img class="logo" src="images/logo.png" />

        <div class="lang-selector">
              <a href="#" data-language-name="json">json</a>
              <a href="#" data-language-name="php">php</a>
              <a href="#" data-language-name="ruby">ruby</a>
              <a href="#" data-language-name="python">python</a>
              <a href="#" data-language-name="javascript">node.js</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href="https://discuss.dwolla.com/c/api-support" target="_blank">Get some help</a></li>
            <li><a href='https://developers.dwolla.com/dev/pages/sandbox' target="_blank">Sandbox Environment</a></li>
            <li><a href='http://github.com/tripit/slate' target="_blank">Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id='introduction'>Introduction</h1><pre class="highlight plaintext"><code>  _          _ _             
 | |__   ___| | | ___        
 | '_ \ / _ \ | |/ _ \       
 | | | |  __/ | | (_) |      
 |_| |_|\___|_|_|\___/     _ 
 __      _____  _ __| | __| |
 \ \ /\ / / _ \| '__| |/ _` |
  \ V  V / (_) | |  | | (_| |
   \_/\_/ \___/|_|  |_|\__,_|

</code></pre>

<p>Welcome to the Dwolla API V2 reference guide.  Find integration resources and getting started guides at developers.dwolla.com.</p>
<h2 id='overview'>Overview</h2>
<p>The Dwolla V2 API is built with REST principles in mind.  JSON-HAL is supported.  Swagger is also supported.</p>

<p>Dwolla V2 API is a work in progress.  New endpoints will be built on the Dwolla V2 API instead of the previous V1 version.  We encourage all API consumers to use the V2 API where possible, and, once the V2 API supports the same set of features as V1, we encourage all API consumers to migrate to V2.  OAuth access and refresh tokens created in V1 can be used in V2.</p>
<h2 id='making-requests'>Making Requests</h2><pre class="highlight shell"><code>POST https://api.dwolla.com/customers
Content-Type: application/json
Accept: application/vnd.dwolla.v1.hal+json
Authorization: Bearer myOAuthAccessToken123

<span class="o">{</span>
    <span class="s2">"foo"</span>: <span class="s2">"bar"</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight shell"><code>...

GET https://www.dwolla.com/oauth/rest/transactions?client_id<span class="o">=</span>XYZ&amp;client_secret<span class="o">=</span>JJJ&amp;limit<span class="o">=</span>10
</code></pre>

<p><code class="prettyprint">POST</code> requests must have a JSON encoded body and the 
<code class="prettyprint">Content-Type: application/json</code> header.</p>

<p>All requests must be made over HTTPS.  Any HTTP requests are met with a HTTP 302 to its HTTPS equivalent.</p>

<aside class="notice">
Remember to [url-encode](http://en.wikipedia.org/wiki/Percent-encoding) all GET querystring parameters!
</aside>
<h2 id='responses'>Responses</h2>
<blockquote>
<p>Success response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
    <span class="s2">"Success"</span>: <span class="nb">true</span>,
    <span class="s2">"Message"</span>: <span class="s2">"Success"</span>,
    <span class="s2">"Response"</span>: 71332,
    <span class="s2">"_links"</span>: null
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Error response</p>
</blockquote>
<pre class="highlight shell"><code>cf-ray → 20365e143336220a-EWR
content-length → 48
content-type → application/json; <span class="nv">charset</span><span class="o">=</span>UTF-8
date → Thu, 09 Jul 2015 19:17:10 GMT
server → cloudflare-nginx
status → 401 Unauthorized
version → HTTP/1.1
x-request-id → cc94309f-d6f2-4687-9a51-463ba0593f4c

<span class="o">{</span>
  <span class="s2">"code"</span>: 1,
  <span class="s2">"description"</span>: <span class="s2">"Expired access token."</span>
<span class="o">}</span>
</code></pre>
<h2 id='errors'>Errors</h2>
<blockquote>
<p>Example error.  HTTP 401:</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"code"</span>: 1,
  <span class="s2">"description"</span>: <span class="s2">"Expired access token."</span>
<span class="o">}</span>
</code></pre>

<p>Error responses use HTTP status codes to indicate the type of error.  The JSON response body will contain an error code and a description of the error.</p>
<h3 id='common-errors'>Common Errors</h3>
<p>The following errors are common across all API endpoints.</p>

<table><thead>
<tr>
<th>Error String</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>foo</td>
<td>bar</td>
</tr>
</tbody></table>

          <h1 id='oauth'>OAuth</h1><pre class="highlight plaintext"><code>  /$$$$$$   /$$$$$$              /$$     /$$      
 /$$__  $$ /$$__  $$            | $$    | $$      
| $$  \ $$| $$  \ $$ /$$   /$$ /$$$$$$  | $$$$$$$ 
| $$  | $$| $$$$$$$$| $$  | $$|_  $$_/  | $$__  $$
| $$  | $$| $$__  $$| $$  | $$  | $$    | $$  \ $$
| $$  | $$| $$  | $$| $$  | $$  | $$ /$$| $$  | $$
|  $$$$$$/| $$  | $$|  $$$$$$/  |  $$$$/| $$  | $$
 \______/ |__/  |__/ \______/    \___/  |__/  |__/                                                          

</code></pre>

<p>Dwolla&rsquo;s API lets you interact with a user&rsquo;s Dwolla account and act on its behalf to send money, request money, and more.  To do so, your application first needs to request authorization from users.  </p>

<p>Dwolla implements the <a href="http://oauth.net/2/">OAuth 2.0 standard</a> to facilitate this authorization. Similar to Facebook and Twitter&rsquo;s authentication flow, the user is first presented with a permission dialog for your application, at which point the user can either approve the permissions requested, or reject them. Once the user approves, an <code class="prettyprint">authorization_code</code> is sent to your application, which will then <a href="#finish-authorization">be exchanged</a> for an <code class="prettyprint">access_token</code> and a <code class="prettyprint">refresh_token</code> pair. </p>

<p>The <code class="prettyprint">access_token</code> can then be used to make API calls which require user authentication like <a href="#send-money">Send</a> or <a href="#list-a-user's-transactions">List Transactions</a>. </p>
<h3 id='token-lifetimes'>Token lifetimes</h3>
<p><strong>Access tokens</strong> are <em>short lived</em>: 1 hour.</p>

<p><strong>Refresh tokens</strong> are <em>long lived</em>: 60 days.</p>

<p>A refresh token can be used within 60 days to generate a new access_token and refresh_token pair.  So long as you <a href="#refresh-authorization">refresh your authorization</a> at least every 60 days, your application can maintain authorization indefinitely without requiring the user to re-authorize.</p>
<h2 id='request-authorization'>Request Authorization</h2><pre class="highlight php"><code><span class="cp">&lt;?php</span>

<span class="nv">$OAuth</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Dwolla\OAuth</span><span class="p">();</span>
<span class="nv">$OAuth</span><span class="o">-&gt;</span><span class="na">settings</span><span class="o">-&gt;</span><span class="na">client_id</span> <span class="o">=</span> <span class="nv">$apiKey</span><span class="p">;</span>
<span class="nv">$OAuth</span><span class="o">-&gt;</span><span class="na">settings</span><span class="o">-&gt;</span><span class="na">client_secret</span> <span class="o">=</span> <span class="nv">$apiSecret</span><span class="p">;</span>

<span class="nv">$url</span> <span class="o">=</span> <span class="nv">$OAuth</span><span class="o">-&gt;</span><span class="na">genAuthUrl</span><span class="p">(</span><span class="s2">"https://myredirect.com/redirect"</span><span class="p">);</span>

<span class="cp">?&gt;</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># Generate OAuth URL with redirect to requestb.in</span>
<span class="k">print</span><span class="p">(</span><span class="n">oauth</span><span class="o">.</span><span class="n">genauthurl</span><span class="p">(</span><span class="s">"http://requestb.in/122rdhc1"</span><span class="p">))</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// where to send the user after they grant permission:</span>
<span class="kd">var</span> <span class="nx">redirect_uri</span> <span class="o">=</span> <span class="s2">"https://www.myredirect.com/redirect"</span><span class="p">;</span>  

<span class="c1">// generate OAuth initiation URL</span>
<span class="kd">var</span> <span class="nx">authUrl</span> <span class="o">=</span> <span class="nx">Dwolla</span><span class="p">.</span><span class="nx">authUrl</span><span class="p">(</span><span class="nx">redirect_uri</span><span class="p">);</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">redirect_uri</span> <span class="o">=</span> <span class="s2">"https://www.myredirect.com/redirect"</span>
<span class="n">authUrl</span> <span class="o">=</span> <span class="no">Dwolla</span><span class="o">::</span><span class="no">OAuth</span><span class="p">.</span><span class="nf">get_auth_url</span><span class="p">(</span><span class="n">redirect_uri</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Example initiation URL:</p>
</blockquote>
<pre class="highlight shell"><code>https://www.dwolla.com/oauth/v2/authenticate?client_id<span class="o">=</span>abcdefg&amp;response_type<span class="o">=</span>code&amp;redirect_uri<span class="o">=</span>https%3A%2F%2Fwww.myredirect.com%2Fredirect&amp;scope<span class="o">=</span>send|transactions
</code></pre>

<p>To start the OAuth process, construct the initiation URL which the user will visit in order to grant permission to your application.  It describes the permissions your application requires (<code class="prettyprint">scope</code>), who the client application is (<code class="prettyprint">client_id</code>), and where the user should be redirected to after they grant or deny permissions to your application (<code class="prettyprint">redirect_uri</code>).</p>
<h3 id='url-format'>URL Format:</h3>
<p><code class="prettyprint">
https://www.dwolla.com/oauth/v2/authenticate?client_id={client_id}&amp;response_type=code&amp;redirect_uri={redirect_uri}&amp;scope={scope}
</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>client_id</td>
<td></td>
<td>Application key</td>
</tr>
<tr>
<td>response_type</td>
<td></td>
<td>This must always be set to <code class="prettyprint">code</code></td>
</tr>
<tr>
<td>redirect_uri</td>
<td></td>
<td>URL where the user will be redirected to afterwards</td>
</tr>
<tr>
<td>scope</td>
<td></td>
<td>Permissions you are requesting.  See <a href="#oauth-scopes">below</a> for list of available scopes.  Scopes are delimited by a pipe (&ldquo;&#124;&rdquo;)</td>
</tr>
<tr>
<td>verified_account</td>
<td>yes</td>
<td>Require new users opting to register for Dwolla to create a fully-verified Dwolla account instead of a default lightweight Direct account.</td>
</tr>
</tbody></table>

<aside class="notice">
Remember to url-encode all querystring parameters!
</aside>
<h3 id='oauth-scopes'>OAuth Scopes</h3>
<p>Applications may request the following permission scopes when generating an access token:</p>

<table><thead>
<tr>
<th>Scope Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>AccountInfoFull</td>
<td>Access detailed account profile</td>
</tr>
<tr>
<td>Contacts</td>
<td>Access the user&rsquo;s contacts</td>
</tr>
<tr>
<td>Transactions</td>
<td>Access the user&rsquo;s transaction data</td>
</tr>
<tr>
<td>Balance</td>
<td>Access the user&rsquo;s Dwolla account balance</td>
</tr>
<tr>
<td>Send</td>
<td>Send money on the user&rsquo;s behalf</td>
</tr>
<tr>
<td>Request</td>
<td>Send money requests, list them, fulfill them</td>
</tr>
<tr>
<td>Funding</td>
<td>Access the user&rsquo;s funding sources (i.e. connected bank accounts)</td>
</tr>
<tr>
<td>ManageAccount</td>
<td>Manage the user&rsquo;s account settings</td>
</tr>
<tr>
<td>Scheduled</td>
<td>Allow scheduling one-time and recurring payments.</td>
</tr>
</tbody></table>
<h2 id='finish-authorization'>Finish Authorization</h2><pre class="highlight php"><code><span class="cp">&lt;?php</span>

<span class="nv">$OAuth</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Dwolla\OAuth</span><span class="p">();</span>
<span class="nv">$OAuth</span><span class="o">-&gt;</span><span class="na">settings</span><span class="o">-&gt;</span><span class="na">client_id</span> <span class="o">=</span> <span class="nv">$apiKey</span><span class="p">;</span>
<span class="nv">$OAuth</span><span class="o">-&gt;</span><span class="na">settings</span><span class="o">-&gt;</span><span class="na">client_secret</span> <span class="o">=</span> <span class="nv">$apiSecret</span><span class="p">;</span>

<span class="nv">$authorizationCode</span> <span class="o">=</span> <span class="s2">"J9kkk2JbX7Yjl4L28fM13il46QI="</span><span class="p">;</span>
<span class="nv">$redirect_uri</span> <span class="o">=</span> <span class="s2">"https://www.myredirect.com/redirect"</span><span class="p">;</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$OAuth</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nv">$authorizationCode</span><span class="p">,</span> <span class="nv">$redirect_uri</span><span class="p">);</span>

<span class="nb">print_r</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># Get access key and refresh token pair</span>
<span class="n">access_set</span> <span class="o">=</span> <span class="n">oauth</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">"Z/KHDIyWO/LboIGn3wGGs1+sRWg="</span><span class="p">,</span> <span class="s">"http://requestb.in/122rdhc1"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">access_set</span><span class="p">)</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JCGQXLrlfuOqdUYdTcLz3rBiCZQDRvdWIUPkw++GMuGhkem9Bo"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"client_secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"g7QLwvO37aN2HoKx1amekWi8a2g7AIuPbD5C/JSLqXIcDOxfTr"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"h6TvQZH+5BsV//O43uOJ0uRkBLk="</span><span class="p">,</span><span class="w">
  </span><span class="nt">"grant_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"authorization_code"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"redirect_uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.myredirect.com/redirect"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight javascript"><code><span class="nx">Dwolla</span><span class="p">.</span><span class="nx">finishAuth</span><span class="p">(</span><span class="nx">authorizationCode</span><span class="p">,</span> <span class="nx">redirect_uri</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">auth</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">access_token</span> <span class="o">=</span> <span class="nx">auth</span><span class="p">.</span><span class="nx">access_token</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">refresh_token</span> <span class="o">=</span> <span class="nx">auth</span><span class="p">.</span><span class="nx">refresh_token</span><span class="p">;</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">info</span> <span class="o">=</span> <span class="no">Dwolla</span><span class="o">::</span><span class="no">OAuth</span><span class="p">.</span><span class="nf">get_token</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">redirect_uri</span><span class="p">)</span>
<span class="n">token</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s1">'access_token'</span><span class="p">]</span>
<span class="n">refresh_token</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s1">'refresh_token'</span><span class="p">]</span>
</code></pre>

<blockquote>
<p>Successful Response:</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"access_token"</span>: <span class="s2">"YLAZSreh165CAD2tPhAEzFCYYIrVyFomLWUDMGFBZIw9KtIg4q"</span>,
  <span class="s2">"expires_in"</span>: 3600,
  <span class="s2">"refresh_token"</span>: <span class="s2">"Pgk+l9okjwTCfsvIvEDPrsomE1er1txeyoaAkTIBAuXza8WvZY"</span>,
  <span class="s2">"refresh_expires_in"</span>: 5184000,
  <span class="s2">"token_type"</span>: <span class="s2">"bearer"</span>
<span class="o">}</span>
</code></pre>

<p>Once the user returns to your application via the <code class="prettyprint">redirect_uri</code> you specified, there will be a <code class="prettyprint">code</code> querystring parameter appended to that URL.  Exchange the authorization <code class="prettyprint">code</code> for an <code class="prettyprint">access_token</code> and <code class="prettyprint">refresh_token</code> pair.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code class="prettyprint">POST https://www.dwolla.com/oauth/v2/token</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>client_id</td>
<td>Application key</td>
</tr>
<tr>
<td>client_secret</td>
<td>Application secret</td>
</tr>
<tr>
<td>code</td>
<td>The authorization code included in the redirect URL</td>
</tr>
<tr>
<td>grant_type</td>
<td>This must be set to <code class="prettyprint">authorization_code</code></td>
</tr>
<tr>
<td>redirect_uri</td>
<td>The same redirect_uri specified in the intiation step</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>access_token</td>
<td>A new access token with requested scopes</td>
</tr>
<tr>
<td>expires_in</td>
<td>The lifetime of the access token, in seconds.  Default is 3600.</td>
</tr>
<tr>
<td>refresh_token</td>
<td>New refresh token</td>
</tr>
<tr>
<td>refresh_expires_in</td>
<td>The lifetime of the refresh token, in seconds.  Default is 5184000.</td>
</tr>
<tr>
<td>token_type</td>
<td>Always <code class="prettyprint">bearer</code>.</td>
</tr>
</tbody></table>
<h2 id='refresh-authorization'>Refresh Authorization</h2><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JCGQXLrlfuOqdUYdTcLz3rBiCZQDRvdWIUPkw++GMuGhkem9Bo"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"client_secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"g7QLwvO37aN2HoKx1amekWi8a2g7AIuPbD5C/JSLqXIcDOxfTr"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"refresh_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pgk+l9okjwTCfsvIvEDPrsomE1er1txeyoaAkTIBAuXza8WvZY"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"grant_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"refresh_token"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight python"><code><span class="c"># Exchange your expiring refresh token in "access_set" for another</span>
<span class="c"># access/refresh token pair</span>

<span class="k">print</span><span class="p">(</span><span class="n">oauth</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">access_set</span><span class="p">[</span><span class="s">'refresh_token'</span><span class="p">]))</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">Dwolla</span><span class="p">.</span><span class="nx">refreshAuth</span><span class="p">(</span><span class="nx">refreshToken</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">auth</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">new_access_token</span> <span class="o">=</span> <span class="nx">auth</span><span class="p">.</span><span class="nx">access_token</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">new_refresh_token</span> <span class="o">=</span> <span class="nx">auth</span><span class="p">.</span><span class="nx">refresh_token</span><span class="p">;</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">info</span> <span class="o">=</span> <span class="no">Dwolla</span><span class="o">::</span><span class="no">OAuth</span><span class="p">.</span><span class="nf">refresh_auth</span><span class="p">(</span><span class="n">refresh_token</span><span class="p">)</span>
<span class="n">token</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s1">'access_token'</span><span class="p">]</span>
<span class="n">refresh_token</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s1">'refresh_token'</span><span class="p">]</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>

<span class="nv">$OAuth</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Dwolla\OAuth</span><span class="p">();</span>
<span class="nv">$OAuth</span><span class="o">-&gt;</span><span class="na">settings</span><span class="o">-&gt;</span><span class="na">client_id</span> <span class="o">=</span> <span class="nv">$apiKey</span><span class="p">;</span>
<span class="nv">$OAuth</span><span class="o">-&gt;</span><span class="na">settings</span><span class="o">-&gt;</span><span class="na">client_secret</span> <span class="o">=</span> <span class="nv">$apiSecret</span><span class="p">;</span>

<span class="nv">$refreshToken</span> <span class="o">=</span> <span class="s2">"Cr72k48ogBXh+PLwZ/gq2hAtRYSTQl+NW9W0fTxYjaYKRdEsKI"</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$OAuth</span><span class="o">-&gt;</span><span class="na">refresh</span><span class="p">(</span><span class="nv">$refreshToken</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>

<blockquote>
<p>Successful Response:</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"access_token"</span>: <span class="s2">"hr1tSJk23tOv9RxR8cQuDpUD/kpUgf0cb9WfKtRoPxTw8ymbVt"</span>,
  <span class="s2">"expires_in"</span>: 3600,
  <span class="s2">"refresh_token"</span>: <span class="s2">"lqopeyjq5AJln5fpMedElUULz+XBNNw9nAkIinxE0g4aEzxmDc"</span>,
  <span class="s2">"refresh_expires_in"</span>: 5184000,
  <span class="s2">"token_type"</span>: <span class="s2">"bearer"</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Invalid or Expired Refresh Token Response:</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"error"</span>: <span class="s2">"access_denied"</span>,
  <span class="s2">"error_description"</span>: <span class="s2">"Invalid refresh token."</span>
<span class="o">}</span>
<span class="o">{</span>
  <span class="s2">"error"</span>: <span class="s2">"access_denied"</span>,
  <span class="s2">"error_description"</span>: <span class="s2">"Expired refresh token."</span>
<span class="o">}</span>
</code></pre>

<p>Use a valid <code class="prettyprint">refresh_token</code> to generate a new <code class="prettyprint">access_token</code> and <code class="prettyprint">refresh_token</code> pair.</p>

<p><strong>NOTE:</strong> The <code class="prettyprint">refresh_token</code> you receive will <em>change</em> every time you exchange either an <code class="prettyprint">authorization_code</code> or <code class="prettyprint">refresh_token</code> for a new token pair. Only the most recently issued <code class="prettyprint">refresh_token</code> will allow you to receive a new pair.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code class="prettyprint">POST https://www.dwolla.com/oauth/v2/token</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>client_id</td>
<td>Application key</td>
</tr>
<tr>
<td>client_secret</td>
<td>Application secret</td>
</tr>
<tr>
<td>refresh_token</td>
<td>A valid refresh token</td>
</tr>
<tr>
<td>grant_type</td>
<td>This must be set to <code class="prettyprint">refresh_token</code></td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>access_token</td>
<td>A new access token with requested scopes</td>
</tr>
<tr>
<td>expires_in</td>
<td>The lifetime of the access token, in seconds.  Default is 3600.</td>
</tr>
<tr>
<td>refresh_token</td>
<td>New refresh token</td>
</tr>
<tr>
<td>refresh_expires_in</td>
<td>The lifetime of the refresh token, in seconds.  Default is 5184000.</td>
</tr>
<tr>
<td>token_type</td>
<td>Always <code class="prettyprint">bearer</code>.</td>
</tr>
</tbody></table>

          <h1 id='customers'>Customers</h1><pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"id"</span>: <span class="s2">"99bfb139-eadd-4cdf-b346-7504f0c16c60"</span>,
  <span class="s2">"firstName"</span>: <span class="s2">"Bob"</span>,
  <span class="s2">"lastName"</span>: <span class="s2">"Dole"</span>,
  <span class="s2">"status"</span>: <span class="s2">"active"</span>,
  <span class="s2">"_links"</span>: <span class="o">{</span>
    <span class="s2">"self"</span>: <span class="o">{</span>
      <span class="s2">"href"</span>: <span class="s2">"https://api.dwolla.com/customers/99bfb139-eadd-4cdf-b346-7504f0c16c60"</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<p>Create a Customer.  A customer represents an individual or business with whom you intend to transact with.  In order to manage a user&rsquo;s Customers, the <code class="prettyprint">ManageCustomers</code> OAuth scope is required.</p>
<h3 id='customer-resource'>Customer Resource</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Customer Record unique identifier.  UUID format.</td>
</tr>
<tr>
<td>firstName</td>
<td>Customer&rsquo;s first name.</td>
</tr>
<tr>
<td>lastName</td>
<td>Customer&rsquo;s last name.</td>
</tr>
<tr>
<td>status</td>
<td>Either <code class="prettyprint">active</code>, <code class="prettyprint">deactivated</code>, or <code class="prettyprint">suspended</code>.</td>
</tr>
</tbody></table>
<h2 id='list-customers'>List Customers</h2>
<blockquote>
<p>Request:</p>
</blockquote>
<pre class="highlight shell"><code>GET https://api.dwolla.com/customers
Accept: application/vnd.dwolla.v1.hal+json
Authorization: Bearer pBA9fVDBEyYZCEsLf/wKehyh1RTpzjUj5KzIRfDi0wKTii7DqY
</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.dwolla.com/customers"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.dwolla.com/customers/99bfb139-eadd-4cdf-b346-7504f0c16c60"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"99bfb139-eadd-4cdf-b346-7504f0c16c60"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bob"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dole"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Fetch a list of Customers which belong to the authorized user.</p>

<aside class="reminder">This endpoint [requires](#authentication) an OAuth access token with the `ManageCustomers` scope.</aside>
<h3 id='http-request'>HTTP Request</h3>
<p><code class="prettyprint">GET https://api.dwolla.com/customers</code></p>
<h3 id='errors'>Errors</h3>
<table><thead>
<tr>
<th>HTTP Status</th>
<th>Message</th>
</tr>
</thead><tbody>
<tr>
<td>404</td>
<td>No active customer record</td>
</tr>
</tbody></table>
<h2 id='new-customer'>New Customer</h2>
<blockquote>
<p>Request:</p>
</blockquote>
<pre class="highlight shell"><code>POST /customers

</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sam"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"McSammons"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gordon+1@dwolla.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"ipAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"99.99.99.99"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.uat.dwolla.com/customers/6f80efc0-b158-4df1-9b11-da85f0bffdd4"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6f80efc0-b158-4df1-9b11-da85f0bffdd4"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bob"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dole"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Create a new Customer.</p>

<aside class="reminder">This endpoint [requires](#authentication) an OAuth access token with the `ManageCustomers` scope.</aside>
<h3 id='http-request'>HTTP Request</h3>
<p><code class="prettyprint">POST https://api.dwolla.com/customers</code></p>
<h3 id='request-parameters'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>firstName</td>
<td>Customer&rsquo;s first name.</td>
</tr>
<tr>
<td>lastName</td>
<td>Customer&rsquo;s last name.</td>
</tr>
<tr>
<td>email</td>
<td>Customer&rsquo;s email address.</td>
</tr>
<tr>
<td>ipAddress</td>
<td>Customer&rsquo;s IP address</td>
</tr>
</tbody></table>
<h3 id='errors'>Errors</h3>
<table><thead>
<tr>
<th>HTTP Status</th>
<th>Message</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>A customer record with this information already exists.</td>
</tr>
<tr>
<td>400</td>
<td>Validation errors. Another object is included the response to list the parameters and errors.</td>
</tr>
<tr>
<td>401</td>
<td>You do not have access to this resource.</td>
</tr>
<tr>
<td>500</td>
<td>An unexpected error occurred.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="json">json</a>
                <a href="#" data-language-name="php">php</a>
                <a href="#" data-language-name="ruby">ruby</a>
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="javascript">node.js</a>
          </div>
      </div>
    </div>
  </body>
</html>
